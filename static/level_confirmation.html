<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Confirm Your English Level – FluentMind</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="{{ url_for('static', path='css/common.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', path='css/level-confirmation.css') }}" />
<link rel="stylesheet" href="{{ url_for('static', path='css/settings.css') }}" />

</head>
<body class="level-confirmation-page">
  <header>
    <div class="wrap row">
      <div class="brand">
        <img src="{{ url_for('static', path='img/logo-small.png') }}" alt="FluentMind logo" />
        <span>FluentMind</span>
      </div>
      <nav>
        <a href="/">Main</a>
        <a href="/registration" class="active">Learn now</a>
        <a href="/pricing">Pricing</a>
        <a href="/contacts">Contacts</a>
      </nav>
      <div class="lang">en | ua</div>
    </div>
  </header>

  <main class="wrap settings-wrapper">
    <aside class="settings-sidebar">
			<nav class="settings-nav" aria-label="Profile navigation">
				<button type="button" class="active">
					<img src="{{ url_for('static', path='img/settings/nav-learn.svg') }}" width="22" height="22" alt="" aria-hidden="true" />
					<span class="settings-nav__label"><a href='/learn'>Learn</a></span>
				</button>
				<button type="button">
					<img src="{{ url_for('static', path='img/settings/nav-vocabulary.svg') }}" width="22" height="22" alt="" aria-hidden="true" />
					<span class="settings-nav__label"><a href=''>Vocabulary</a></span>
				</button>
				<button type="button">
					<img src="{{ url_for('static', path='img/settings/nav-memorize.svg') }}" width="22" height="22" alt="" aria-hidden="true" />
					<span class="settings-nav__label"><a href=''>Memorize</a></span>
				</button>
				<button type="button">
					<img src="{{ url_for('static', path='img/settings/nav-previous-lessons.svg') }}" width="22" height="22" alt="" aria-hidden="true" />
					<span class="settings-nav__label"><a href=''>Previous lessons</a></span>
				</button>
				<button type="button">
					<img class="settings-nav__icon" src="{{ url_for('static', path='img/settings/nav-settings.svg') }}" width="22" height="22" alt="" aria-hidden="true" />
					<span class="settings-nav__label"><a href='/settings'>Settings</a></span>
				</button>
			</nav>
		</aside>
    <div class="level-box">
      <h1>Confirm your English level</h1>
      <div class="options">
        <a class="option" href="#test">
          <div class="icon"><img src="{{ url_for('static', path='img/level-pass-test.png') }}" alt="" /></div>
          <div class="text">
            <span class="title">Pass the test</span>
          </div>
          <span class="arrow">›</span>
        </a>
        <a class="option" href="#upload" onclick="uploadCertificate()">
          <div class="icon"><img src="{{ url_for('static', path='img/level-upload-cert.png') }}" alt="" /></div>
          <div class="text">
            <span class="title">Upload certificate</span>
          </div>
          <span class="arrow">›</span>
        </a>
        <a class="option" href="#no-level">
          <div class="icon"><img src="{{ url_for('static', path='img/level-no-level.png') }}" alt="" /></div>
          <div class="text">
            <span class="title">I don’t have an English level</span>
          </div>
          <span class="arrow">›</span>
        </a>
      </div>
    </div>
  </main>

  <footer>
    <div class="wrap">
      <div class="foot-top">
        <div class="foot-brand">
          <img src="{{ url_for('static', path='img/logo-large.png') }}" alt="FluentMind logo large" />
        </div>
        <ul class="contact-list">
          <li><img src="{{ url_for('static', path='img/icon-location.png') }}" alt="" /> <span><strong>Address:</strong> X street, city Zaporizhzhia, Ukraine</span></li>
          <li><img src="{{ url_for('static', path='img/icon-mail.png') }}" alt="" /> <span><strong>Email:</strong> vyshnevetskyivolodymyr@gmail.com</span></li>
          <li><img src="{{ url_for('static', path='img/icon-phone.png') }}" alt="" /> <span><strong>Phone:</strong> +38 (063) 7597571</span></li>
        </ul>
        <div>
          <div class="socials-foot">
            <img src="{{ url_for('static', path='img/linkedin.png') }}" alt="LinkedIn" />
            <img src="{{ url_for('static', path='img/instagram.png') }}" alt="Instagram" />
            <img src="{{ url_for('static', path='img/facebook.png') }}" alt="Facebook" />
          </div>
        </div>
      </div>
      <div class="foot-bottom">
        <span>©2025 FluentMind All rights reserved.</span>
        <a href="#">Privacy Policy</a>
        <a href="#">Terms of use</a>
        <a href="#">Sitemap</a>
      </div>
    </div>
  </footer>
  <script>
    function uploadCertificate() {
      if (document.getElementById('upload-certificate-modal')) return;
      const modal = document.getElementsByClassName('level-box')[0];
      modal.innerHTML = `
        <div class="modal-content">
          <button class="close-button" type="button" aria-label="Close" onclick="closeUploadModal()">×</button>
          <h2>Upload Your English Certificate</h2>
          <form id="upload-certificate-form">
            <input type="file" id="certificate-file" name="file" accept=".pdf,.jpg,.jpeg,.png" required />
            <button type="submit">Upload</button>
          </form>
          <div id="upload-status" class="status" aria-live="polite"></div>
        </div>`;
      document.body.insertAdjacentElement(modal);

      Array.from(document.getElementsByClassName('options')).forEach(option => {
        option.style.visibility = 'hidden';
      });

      const form = document.getElementById('upload-certificate-form');
      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        const fileInput = document.getElementById('certificate-file');
        if (!fileInput.files.length) return;
        const data = new FormData();
        data.append('file', fileInput.files[0]);
        const status = document.getElementById('upload-status');
        status.textContent = 'Uploading...';
        try {
          const resp = await fetch('/api/upload-certificate', { method: 'POST', body: data });
          const json = await resp.json();
          if (json.success) {
            status.textContent = 'Uploaded successfully.';
            setTimeout(() => closeUploadModal(), 1200);
          } else {
            status.textContent = json.message || 'Upload failed.';
          }
        } catch (err) {
          status.textContent = 'Network error.';
        }
      });
    }

    function closeUploadModal(){
      const m = document.getElementById('upload-certificate-modal');
      if (m) m.remove();
    }
  </script>
</body>
</html>
