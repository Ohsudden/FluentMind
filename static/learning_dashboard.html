<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Confirm Your English Level – FluentMind</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="{{ url_for('static', path='css/level-confirmation.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', path='css/common.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', path='css/settings.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', path='css/style.css') }}" />
<style>
  .create-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 16px 32px;
    font-size: 18px;
    font-weight: 600;
    font-family: Montserrat, sans-serif;
    color: #fff;
    background: linear-gradient(135deg, #FF6B6B 0%, #EE5253 100%);
    border: none;
    border-radius: 50px;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(238, 82, 83, 0.4);
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin: auto;
  }

  .create-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(238, 82, 83, 0.6);
  }

  .course-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 300px;
    min-height: 200px;
    padding: 30px;
    background: #fff;
    border-radius: 24px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.05);
    cursor: pointer;
    transition: all 0.3s ease;
    border: 1px solid rgba(0,0,0,0.05);
    text-align: center;
    position: relative;
    overflow: hidden;
    margin: 15px;
  }

  .course-card::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 6px;
      background: linear-gradient(90deg, #6c5ce7, #a29bfe);
  }

  .course-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 20px 40px rgba(108, 92, 231, 0.15);
  }
  
  .course-card span {
      font-family: Montserrat, sans-serif;
      font-size: 20px;
      font-weight: 700;
      color: #2d3436;
      line-height: 1.4;
  }
</style>
</head>
<body class="level-confirmation-page">
  <header>
    <div class="wrap row">
      <div class="brand">
        <img src="{{ url_for('static', path='img/logo-small.png') }}" alt="FluentMind logo" />
        <span>FluentMind</span>
      </div>
      <nav>
        <a href="/">Main</a>
        <a href="/registration" class="active">Learn now</a>
        <a href="/pricing">Pricing</a>
        <a href="/contacts">Contacts</a>
      </nav>
      <div class="lang">en | ua</div>
    </div>
  </header>

  <main class="wrap settings-wrapper">
    <aside class="settings-sidebar">
			<nav class="settings-nav" aria-label="Profile navigation">
				<button type="button" class="active">
					<img src="{{ url_for('static', path='img/settings/nav-learn.svg') }}" width="22" height="22" alt="" aria-hidden="true" />
					<span class="settings-nav__label"><a href='/learn'>Learn</a></span>
				</button>
				<button type="button">
					<img src="{{ url_for('static', path='img/settings/nav-vocabulary.svg') }}" width="22" height="22" alt="" aria-hidden="true" />
          <span class="settings-nav__label"><a href='/vocabulary'>Vocabulary</a></span>
				</button>
				<button type="button">
					<img src="{{ url_for('static', path='img/settings/nav-previous-lessons.svg') }}" width="22" height="22" alt="" aria-hidden="true" />
					<span class="settings-nav__label"><a href='#'>Course Content</a></span>
				</button>
				<button type="button">
					<img class="settings-nav__icon" src="{{ url_for('static', path='img/settings/nav-settings.svg') }}" width="22" height="22" alt="" aria-hidden="true" />
					<span class="settings-nav__label"><a href='/settings'>Settings</a></span>
				</button>
			</nav>
		</aside>

        <div class="level-box">
          <h1>Select the course to proceed</h1>
          <button class="create-btn" onclick="generateCourse()">Create course +</button>
          <br/><br/>
          <div id="courses-container" style="display: flex; gap: 20px; flex-wrap: wrap; margin-bottom: 20px; justify-content: center;"></div>
            
          </div>
        </div>
  </main>
  <script>
    const userLevel = "{{ level }}";

    async function generateCourse() {
      const response = await fetch(`/api/generate-course?level=${userLevel}`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        }
      });
      const data = await response.json();
      console.log(data);
      if (data.success) {
        alert('Course created successfully!');
        window.location.href = '/learn';
      } else {
        alert('Error creating course. Please try again.');
      }
    }

    async function get_user_course() {
      try {
        const response = await fetch('/api/get_courses');
        const data = await response.json();
        
        if (data.success && data.courses && data.courses.length > 0) {
            const container = document.getElementById('courses-container');
            container.innerHTML = ''; 
            
            data.courses.forEach(course => {
                const card = document.createElement('div');
                card.className = 'course-card';
                console.log(course);
                
                card.innerHTML = `
                    <span onclick="navigateToCourse(${course.course_id})">${course.title}</span>                `;
                container.appendChild(card);
            });
        }
      } catch (error) {
        console.error('Error fetching courses:', error);
      }
    }

    document.addEventListener('DOMContentLoaded', get_user_course);

    function navigateToCourse(courseId) {
      window.location.href = `/learn/course${courseId}`;
    }
  </script>
  <footer>
    <div class="wrap">
      <div class="foot-top">
        <div class="foot-brand">
          <img src="{{ url_for('static', path='img/logo-large.png') }}" alt="FluentMind logo large" />
        </div>
        <ul class="contact-list">
          <li><img src="{{ url_for('static', path='img/icon-location.png') }}" alt="" /> <span><strong>Address:</strong> X street, city Zaporizhzhia, Ukraine</span></li>
          <li><img src="{{ url_for('static', path='img/icon-mail.png') }}" alt="" /> <span><strong>Email:</strong> vyshnevetskyivolodymyr@gmail.com</span></li>
          <li><img src="{{ url_for('static', path='img/icon-phone.png') }}" alt="" /> <span><strong>Phone:</strong> +38 (063) 7597571</span></li>
        </ul>
        <div>
          <div class="socials-foot">
            <img src="{{ url_for('static', path='img/linkedin.png') }}" alt="LinkedIn" />
            <img src="{{ url_for('static', path='img/instagram.png') }}" alt="Instagram" />
            <img src="{{ url_for('static', path='img/facebook.png') }}" alt="Facebook" />
          </div>
        </div>
      </div>
      <div class="foot-bottom">
        <span>©2025 FluentMind All rights reserved.</span>
        <a href="#">Privacy Policy</a>
        <a href="#">Terms of use</a>
        <a href="#">Sitemap</a>
      </div>
    </div>
  </footer>

</body>
</html>
